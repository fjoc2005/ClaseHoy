<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - ClaseHoy</title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <header>
        <div class="container header-content">
            <a href="index.html" class="logo">ClaseHoy Admin</a>
        </div>
    </header>

    <main class="container mt-4">
        <h2 class="font-bold mb-4">Registro de Perfiles</h2>
        <div class="card overflow-auto">
            <table style="width: 100%; border-collapse: collapse; min-width: 600px;">
                <thead>
                    <tr style="background: #f8fafc; text-align: left;">
                        <th class="p-3 border-b">Nombre</th>
                        <th class="p-3 border-b">Email</th>
                        <th class="p-3 border-b">Teléfono</th>
                        <th class="p-3 border-b">Rol / Asignaturas</th>
                        <th class="p-3 border-b">Región</th>
                        <th class="p-3 border-b">Fecha Registro</th>
                    </tr>
                </thead>
                <tbody id="user-table-body">
                    <!-- Populated by JS -->
                </tbody>
            </table>
        </div>
    </main>

    <script src="assets/js/auth.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const users = Auth.getAllUsers();
            const tbody = document.getElementById('user-table-body');

            if (users.length === 0) {
                tbody.innerHTML = '<tr><td colspan="6" class="p-4 text-center text-muted">No hay usuarios registrados.</td></tr>';
                return;
            }

            tbody.innerHTML = users.map(user => `
                <tr class="border-b hover:bg-gray-50">
                    <td class="p-3 font-medium">${user.nombre}</td>
                    <td class="p-3 text-sm">${user.email}</td>
                    <td class="p-3 text-sm">${user.telefono || '-'}</td>
                    <td class="p-3 text-sm">
                        ${user.subjects && user.subjects.length > 0 ? user.subjects.join(', ') : 'Institución / General'}
                    </td>
                    <td class="p-3 text-sm">${user.region || '-'}</td>
                    <td class="p-3 text-sm text-muted">${new Date(user.createdAt).toLocaleDateString()}</td>
                </tr>
            `).join('');
        });
    </script>
</body>

</html>